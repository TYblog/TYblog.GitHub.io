<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head profile="http://gmpg.org/xfn/11"><!-- hexo injector head_begin start --><link href="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>å–µå¸•æ–¯å…ˆç”Ÿ</title>
  
<link rel="stylesheet" href="/bbtalk/css/style.css">

  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet"  media="print" onload="this.media='all'">

  <!--ç™¾åº¦ç»Ÿè®¡-->

<meta name="generator" content="Hexo 5.2.0"></head>


<body class="main">
  <div class="clouds">
    <div id="wrapper">
      <div id="innerWrapper">
        <div id="pageTop"></div>
        <div id="pageHeader">
          <div id="anniversary">
            <span>18576</span>
          </div>
          <ul id="pageNav">
            
            <li><a title="ğŸš©â˜€åšå®¢" href="https://tyblog.github.io">ğŸš©â˜€åšå®¢</a></li>
            
            <li><a title="ğŸ’æƒ…ä¾£å“”å“”" href="https://tyblog.github.io/bbtalk">ğŸ’æƒ…ä¾£å“”å“”</a></li>
            
          </ul>
        </div>
        <div id="pageContent">
          

          <div id="articleMale">

            <main id="app">

              <div class="timenode" v-for="item in contents" v-cloak>
                <div class="meta">
                  <p><time v-bind:datetime="item.attributes.time">{{item.attributes.time}}</time></p>
                </div>
                <div class="body">
                  <p v-html='item.attributes.content'></p>
                </div>
              </div>
              <div class="load-ctn">
                <a class="btn lv" v-on:click="loadMore1" v-if="contents" v-cloak>å†ç¿»ç¿»</a>
                <p class="tip" v-else>åˆ«æ€¥ï¼ŒåŠ è½½å‘¢</p>
                </div>
              <p class="tip">å…±è®¡å‘é€ {{count}} æ¡è¯´è¯´</p>
            </main>







          </div>

          <div id="articleFemale">

            <main id="app2">

              <div class="timenode" v-for="item in contents" v-cloak>
                <div class="meta">
                  <p><time v-bind:datetime="item.attributes.time">{{item.attributes.time}}</time></p>
                </div>
                <div class="body">
                  <p v-html='item.attributes.content'></p>
                </div>
              </div>
              <div class="load-ctn">
                <a class="btn lv" v-on:click="loadMore2" v-if="contents" v-cloak>å†ç¿»ç¿»</a>
                <p class="tip" v-else>åˆ«æ€¥ï¼ŒåŠ è½½å‘¢</p>
                </div>
              <p class="tip">å…±è®¡å‘é€ {{count}} æ¡è¯´è¯´</p>
            </main>

          </div>
          <div class="clear"></div>
          <div id="footer" class="footer">

    <p align="center"><strong>COPY RIHGT&copy; 2020</strong> | Themes:<strong
            style="color:#94A4FF">Sweet</strong>-<strong style="color:#FFB296">Clouds</strong> By <a
            href="https://www.heson10.com" target="_blank"><strong>Heson</strong></a></p>

    <p align="center"> <a target="_blank" rel="noopener" href="https://love.heson10.com" title="æƒ…ä¾£å¾®åš">

            <strong>æƒ…ä¾£å¾®åš1.0</strong> æŒç»­ä¼˜åŒ–ä¸­

        </a> Proudly By <a href="http://hexo.io" target="_blank">Hexo</a></p>
    
<script src="/bbtalk/js/jquery.js"></script>

    
<script src="/bbtalk/js/all.js"></script>

    <script src="https://cdn.bootcss.com/vue/2.6.11/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.5.3/dist/av-min.js"></script>
    <script>

        var {
            Query
        } = AV;
        AV.init({
            appId: "QcEQtIf8FpTfKMmrD6E2BvXh-MdYXbMMI",
            appKey: "gIhx8WaI0Iz55C7Ju54pPLBI",
            serverURLs: ''
        });

        var query = new AV.Query('content');




        var app = new Vue({
            el: '#app',
            data: {
                page: 0,
                count: 0,
                contents: []
            },
            methods: {
                loadMore1: function (event) {

                    var {
                        Query
                    } = AV;
                    AV.init({
                        appId: "QcEQtIf8FpTfKMmrD6E2BvXh-MdYXbMMI",
                        appKey: "gIhx8WaI0Iz55C7Ju54pPLBI",
                        serverURLs: ''
                    });

                    var query = new AV.Query('content');
                    getData1(++this.page);
                }
            }
        })

        var app2 = new Vue({
            el: '#app2',
            data: {
                page: 0,
                count: 0,
                contents: []
            },
            methods: {
                loadMore2: function (event) {
                    var {
                        Query
                    } = AV;
                    AV.init({
                        appId: "75mXM6J7sHLOAdcrRHj8IhNu-MdYXbMMI",
                        appKey: "mK8PzBArKTUCWct0GVOlPpOr",
                        serverURLs: ''
                    });

                    var query2 = new AV.Query('content');






                    getData2(++this.page);
                }
            }
        })
        query.count().then(function (count) {
            app.count = count;
        }, function (error) { });

        getData1(0);

        var {
            Query
        } = AV;
        AV.init({
            appId: "75mXM6J7sHLOAdcrRHj8IhNu-MdYXbMMI",
            appKey: "mK8PzBArKTUCWct0GVOlPpOr",
            serverURLs: ''
        });


        var query2 = new AV.Query('content');

        query2.count().then(function (count) {
            app2.count = count;
        }, function (error) { });

        getData2(0);

        function urlToLink(str) {
            // var re = /(http|ftp|https):\/\/[\w-]+(.[\w-]+)+([\w-.,@?^=%&:/~+#]*[\w-\@?^=%&/~+#])?/g; 
            var re = /\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|gif))\S+/g;
            var re_forpic = /\bhttps?:\/\/.*?(\.gif|\.jpeg|\.png|\.jpg|\.bmp|\.webp)/g;
            var re_forpic_vx = /^http:\/\/mmbiz\.qpic\.cn[^\s]*/g;
            str = str.replace(re, function (website) {
                return "<a href='" + website + "' target='_blank'> <i class='iconfont icon-lianjie-copy'></i>é“¾æ¥ </a>";
            });
            str = str.replace(re_forpic, function (imgurl) {
                return "<img src='" + imgurl + "'  /> ";
            });
            str = str.replace(re_forpic_vx, function (imgurl) {
                return "<img src='" + imgurl + "'  /> ";
            });
            return str;
        };

        //ç”·ç”Ÿè·å–å“”å“”
        function getData1(page = 0) {
            query.descending('createdAt').skip(page * 10).limit(10).find().then(function (results) {
                if (results.length == 0) {
                    alert('ä¹‹å‰æ²¡å‘è¡¨è¿‡è¯´è¯´äº†')
                } else {
                    let resC = results;
                    reqData = false;
                    resC.forEach((i) => {
                        let d = new Date(i.createdAt);
                        datetime = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
                        i.attributes.time = datetime;//â˜†å‹å¥½åœ°æ˜¾ç¤ºæ—¶é—´æ”¹ä¸º i.attributes.time = timeago(d);
                        i.attributes.content = urlToLink(i.attributes.content);
                        app.contents.push(i);
                    })
                }

            }, function (error) { });
        }


        //å¥³ç”Ÿè·å–å“”å“”
        function getData2(page = 0) {
            query2.descending('createdAt').skip(page * 10).limit(10).find().then(function (results) {
                if (results.length == 0) {
                    alert('ä¹‹å‰æ²¡å‘è¡¨è¿‡å“”å“”äº†')
                } else {
                    let resC = results;
                    reqData = false;
                    resC.forEach((i) => {
                        let d = new Date(i.createdAt);
                        datetime = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
                        i.attributes.time = datetime; //â˜†å‹å¥½åœ°æ˜¾ç¤ºæ—¶é—´æ”¹ä¸º i.attributes.time = timeago(d);
                        i.attributes.content = urlToLink(i.attributes.content);
                        app2.contents.push(i);
                    })
                }

            }, function (error) { });
        }

        //å‹å¥½åœ°æ˜¾ç¤ºæ—¶é—´,æŒ‰éœ€ä¿®æ”¹ä¸Šé¢æ ‡è®°â˜†çš„ä»£ç 
        function timeago(dateTimeStamp) {

            var minute = 1000 * 60;
            var hour = minute * 60;
            var day = hour * 24;
            var halfamonth = day * 15;
            var month = day * 30;

            var now = new Date().getTime();
            var diffValue = now - dateTimeStamp;

            if (diffValue < 0) {
                //éæ³•æ“ä½œ
                //alert("ç»“æŸæ—¥æœŸä¸èƒ½å°äºå¼€å§‹æ—¥æœŸï¼");
            }

            var monthC = diffValue / month;
            var weekC = diffValue / (7 * day);
            var dayC = diffValue / day;
            var dayR = diffValue / hour % 24;
            var hourC = diffValue / hour;
            var hourR = diffValue / minute % 60;
            var minC = diffValue / minute;
            var minR = diffValue / 1000 % 60;
            if (monthC >= 1) {
                result = getLocalTime(dateTimeStamp / 1000);
            } else if (weekC >= 1) {
                result = parseInt(weekC) + "å‘¨å‰";
            } else if (dayC >= 1) {
                result = parseInt(dayC) + "å¤©" + parseInt(dayR) + "å°æ—¶å‰";
            } else if (hourC >= 1) {
                result = parseInt(hourC) + "å°æ—¶" + parseInt(hourR) + "åˆ†é’Ÿå‰";
            } else if (minC >= 1) {
                result = parseInt(minC) + "åˆ†é’Ÿ" + parseInt(minR) + "ç§’å‰";
            } else result = "åˆšåˆšå‘è¡¨";
            return result;
        }

        function getLocalTime(nS) {
            return new Date(parseInt(nS) * 1000).toLocaleString().replace(/:\d{1,2}$/, ' ');
        }

    </script>



</div>
        </div>
      </div>
    </div>
  </div>
<!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/js/index.js"></script><!-- hexo injector body_end end --><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>